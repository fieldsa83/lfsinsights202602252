% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/math_and_helper_functions.R
\name{calculate_difference}
\alias{calculate_difference}
\title{Calculate the difference between comparison categories for the comparison variable}
\usage{
calculate_difference(
  data,
  analysis_vars,
  weight_var,
  est_type,
  estimate,
  comparison_variable = NULL,
  comparison_categories = NULL
)
}
\arguments{
\item{data}{Data frame containing time series data}

\item{analysis_vars}{Character vector of grouping variables (e.g., "GENDER")}

\item{weight_var}{Character scalar used to form the ratio column names (e.g., "supp_weight")}

\item{est_type}{Type of estimate, ratio or ratio_distribution}

\item{estimate}{List with various parameters}

\item{comparison_variable}{Name of the variable to compare (e.g., "GENDER")}

\item{comparison_categories}{string of categories to compare (e.g., "1,2")}
}
\value{
A data frame:
\itemize{
\item If \code{comparison_variable} is NULL: original rows with \verb{<measure>_change} and optionally \verb{<measure>_pct_change}.
\item If \code{comparison_variable} is set: one row per DATE + other groups (excluding \code{comparison_variable}),
with \verb{<weight_var>_ratio_pp_diff} and \code{BW_..._ratio_pp_diff} for all bootstrap replicates.
}
}
\description{
Calculate the difference between comparison categories for the comparison variable
}
